# Парсер топ фильмов с Кинопоиска и вывод на страницу топ 10

Само приложение это UI где находятся 2 страницы, одна из них страница с выбором времени парсинга

![image](https://user-images.githubusercontent.com/92450565/161250707-388afc53-ba35-4d67-82d3-34df01a0bed0.png)

Вторая страница это собственно топ-10 фильмов которые были спарсены в это время с Кинопоиска. Чтобы каждый раз не загружать топ-10 из базы данных, в проекте реализовано кеширование (Spring Caching). То есть первый раз когда мы открываем приложение и проходим по всем датам, то чтобы вывести на экран сервер заходит в бд и достает оттуда данные запоминая для какой даты какие данные он достал. В дальнейшем если мы нажимаем на датут которую ранее уже открывали, то приложение дает нам список фильмов уже не из бд, а их кеша. Информация о том зашел сервер в бд или взял из кеша можно посмотреть в консоли перейдя на вкладку с датой (если уведомление в консоли, значит зашел в бд)

![image](https://user-images.githubusercontent.com/92450565/161252323-09a27a30-113f-49ba-81bc-923e53df67a4.png)


![image](https://user-images.githubusercontent.com/92450565/161250946-5950b5b6-cc90-424c-94f0-8ebb5fbab755.png)
____
В программе сам парсер сделан очень примитивно без дополнительной нагрузки в тело запроса. Парсер с Кинопоиска запускается автоматически каждые 15 минут (Spring Scheduling время работы парсера для примера: 10:15, 10:30, 10:45, 11:00 и тд.) - оптимальное время, чтобы алгоритмы кинопоиска не выдавали каптчу о проверке на бота (но иногда все равно не дает спарсить). Посмотреть удачно ли отработал алгоритм можно в консоли по соответсвующему тексту 

![image](https://user-images.githubusercontent.com/92450565/161250214-5edf0d78-02fe-4121-9017-d84c5e5d4089.png)

или

![image](https://user-images.githubusercontent.com/92450565/161252936-ac3a6be2-b1a3-46eb-8b4c-96084867a94d.png)


В данном приложении была использована встаиваемая база данных H2.
Чтобы зайти в БД, нужно запустить приложение и пройти по адресу http://localhost:8080/h2-console/ и заполнить данные как показано ниже

![image](https://user-images.githubusercontent.com/92450565/161142105-aa43df88-dc4d-4f2d-8c3b-46fc9121a923.png)

Далее можем выполнить SELECT из TOP_FILMS и посмотреть что у нас хранится в бд

![image](https://user-images.githubusercontent.com/92450565/161250076-0fbd415a-9e0b-442f-9b45-1acfab7ff7f8.png)

